<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cross-Platform Crypto Compatibility Test</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body { font-family: monospace; padding: 12px; }
  h2 { margin-top: 24px; }
  .panel { border: 1px solid #ccc; padding: 10px; margin-top: 10px; }
  .pass { color: green; }
  .fail { color: red; }
  pre { white-space: pre-wrap; word-break: break-word; }
</style>
</head>
<body>

<h1>Crypto Compatibility Test</h1>

<h2>1. Environment Fingerprint</h2>
<div id="env" class="panel"></div>

<h2>2. Deterministic Crypto Test</h2>
<div id="deterministic" class="panel"></div>

<h2>3. Crypto Self-Tests</h2>
<div id="tests" class="panel"></div>

<script>
(async () => {

  const envEl = document.getElementById("env");
  const detEl = document.getElementById("deterministic");
  const testEl = document.getElementById("tests");

  const enc = new TextEncoder();
  const dec = new TextDecoder();

  const log = (el, msg) => el.innerHTML += msg + "<br>";

  /* ---------------- Environment ---------------- */

  function fingerprint() {
    const ua = navigator.userAgent;
    const isIOS = /iPad|iPhone|iPod/.test(ua);
    const iosVersion = isIOS ? (ua.match(/OS (\d+)_?(\d+)?/) || []).slice(1).join(".") : "N/A";

    log(envEl, `User Agent: ${ua}`);
    log(envEl, `Platform: ${isIOS ? "iOS " + iosVersion : navigator.platform}`);
    log(envEl, `WebCrypto: ${!!window.crypto && !!crypto.subtle}`);
  }

  /* --*
